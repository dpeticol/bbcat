// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    window.bb.emotion = function() {
      var happy, health;
      health = window.bb.pet.health;
      happy = window.bb.pet.happy;
      if (health < 20) {
        return 'sick';
      } else {
        if (happy < 40) {
          return 'sad';
        } else {
          return 'happy';
        }
      }
    };
    window.bb.fishUpdate = function() {
      var fishCount, hunger;
      hunger = window.bb.pet.hunger;
      fishCount = Math.round(hunger / 20);
      console.log("pet has " + fishCount + " fish now");
      return $('.fish').each(function(i, elem) {
        if (i < fishCount) {
          return $(elem).addClass('active');
        }
      });
    };
    window.bb.heartUpdate = function() {
      var health, heartCount;
      health = window.bb.pet.health;
      heartCount = Math.round(health / 20);
      console.log("pet has " + heartCount + " hearts now");
      return $('.heart').each(function(i, elem) {
        if (i < heartCount) {
          return $(elem).addClass('active');
        }
      });
    };
    window.bb.feed = function() {
      return $.post('/feed', {
        pet: window.bb.pet
      }, function(data, status) {
        window.bb.pet = data;
        console.log('pet was fed', data, status);
        return window.bb.fishUpdate();
      });
    };
    window.bb.heal = function() {
      if (!window.bb.pet.poop) {
        return $.post('/heal', {
          pet: window.bb.pet
        }, function(data, status) {
          window.bb.pet = data;
          console.log('pet was healed', data, status);
          return window.bb.heartUpdate();
        });
      }
    };
    window.bb.clean = function() {
      window.bb.pet.poop = false;
      return $.post('/clean', {
        pet: window.bb.pet
      }, function(data, status) {
        return console.log('pet was cleaned', data, status);
      });
    };
    window.bb.play = function() {
      return $.post('/play', {
        pet: window.bb.pet
      }, function(data, status) {
        window.bb.pet = data;
        return console.log('pet was played with', data, status);
      });
    };
    $('#feed').click(window.bb.feed);
    $('#heal').click(window.bb.heal);
    $('#clean').click(window.bb.clean);
    window.bb.fishUpdate();
    return window.bb.heartUpdate();
  });

}).call(this);
